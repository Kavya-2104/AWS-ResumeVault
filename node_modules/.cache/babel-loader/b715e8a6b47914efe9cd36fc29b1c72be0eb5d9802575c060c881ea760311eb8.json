{"ast":null,"code":"import { AmplifyUrl, USER_AGENT_HEADER, urlSafeDecode, AMPLIFY_SYMBOL } from '@aws-amplify/core/internals/utils';\nimport { decodeJWT, Hub } from '@aws-amplify/core';\nimport { cacheCognitoTokens } from '../../tokenProvider/cacheTokens.mjs';\nimport '../refreshAuthTokens.mjs';\nimport '../../tokenProvider/errorHelpers.mjs';\nimport { cognitoUserPoolsTokenProvider } from '../../tokenProvider/tokenProvider.mjs';\nimport { dispatchSignedInHubEvent } from '../dispatchSignedInHubEvent.mjs';\nimport { createOAuthError } from './createOAuthError.mjs';\nimport { resolveAndClearInflightPromises } from './inflightPromise.mjs';\nimport { validateState } from './validateState.mjs';\nimport { oAuthStore } from './oAuthStore.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst completeOAuthFlow = async ({\n  currentUrl,\n  userAgentValue,\n  clientId,\n  redirectUri,\n  responseType,\n  domain,\n  preferPrivateSession\n}) => {\n  const urlParams = new AmplifyUrl(currentUrl);\n  const error = urlParams.searchParams.get('error');\n  const errorMessage = urlParams.searchParams.get('error_description');\n  if (error) {\n    throw createOAuthError(errorMessage ?? error);\n  }\n  if (responseType === 'code') {\n    return handleCodeFlow({\n      currentUrl,\n      userAgentValue,\n      clientId,\n      redirectUri,\n      domain,\n      preferPrivateSession\n    });\n  }\n  return handleImplicitFlow({\n    currentUrl,\n    redirectUri,\n    preferPrivateSession\n  });\n};\nconst handleCodeFlow = async ({\n  currentUrl,\n  userAgentValue,\n  clientId,\n  redirectUri,\n  domain,\n  preferPrivateSession\n}) => {\n  /* Convert URL into an object with parameters as keys\n  { redirect_uri: 'http://localhost:3000/', response_type: 'code', ...} */\n  const url = new AmplifyUrl(currentUrl);\n  const code = url.searchParams.get('code');\n  const state = url.searchParams.get('state');\n  // if `code` or `state` is not presented in the redirect url, most likely\n  // that the end user cancelled the inflight oauth flow by:\n  // 1. clicking the back button of browser\n  // 2. closing the provider hosted UI page and coming back to the app\n  if (!code || !state) {\n    throw createOAuthError('User cancelled OAuth flow.');\n  }\n  // may throw error is being caught in attemptCompleteOAuthFlow.ts\n  const validatedState = await validateState(state);\n  const oAuthTokenEndpoint = 'https://' + domain + '/oauth2/token';\n  // TODO(v6): check hub events\n  // dispatchAuthEvent(\n  // \t'codeFlow',\n  // \t{},\n  // \t`Retrieving tokens from ${oAuthTokenEndpoint}`\n  // );\n  const codeVerifier = await oAuthStore.loadPKCE();\n  const oAuthTokenBody = {\n    grant_type: 'authorization_code',\n    code,\n    client_id: clientId,\n    redirect_uri: redirectUri,\n    ...(codeVerifier ? {\n      code_verifier: codeVerifier\n    } : {})\n  };\n  const body = Object.entries(oAuthTokenBody).map(([k, v]) => `${encodeURIComponent(k)}=${encodeURIComponent(v)}`).join('&');\n  const {\n    access_token,\n    refresh_token: refreshToken,\n    id_token,\n    error,\n    error_message: errorMessage,\n    token_type,\n    expires_in\n  } = await (await fetch(oAuthTokenEndpoint, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded',\n      [USER_AGENT_HEADER]: userAgentValue\n    },\n    body\n  })).json();\n  if (error) {\n    // error is being caught in attemptCompleteOAuthFlow.ts\n    throw createOAuthError(errorMessage ?? error);\n  }\n  const username = (access_token && decodeJWT(access_token).payload.username) ?? 'username';\n  await cacheCognitoTokens({\n    username,\n    AccessToken: access_token,\n    IdToken: id_token,\n    RefreshToken: refreshToken,\n    TokenType: token_type,\n    ExpiresIn: expires_in\n  });\n  return completeFlow({\n    redirectUri,\n    state: validatedState,\n    preferPrivateSession\n  });\n};\nconst handleImplicitFlow = async ({\n  currentUrl,\n  redirectUri,\n  preferPrivateSession\n}) => {\n  // hash is `null` if `#` doesn't exist on URL\n  const url = new AmplifyUrl(currentUrl);\n  const {\n    id_token,\n    access_token,\n    state,\n    token_type,\n    expires_in,\n    error_description,\n    error\n  } = (url.hash ?? '#').substring(1) // Remove # from returned code\n  .split('&').map(pairings => pairings.split('=')).reduce((accum, [k, v]) => ({\n    ...accum,\n    [k]: v\n  }), {\n    id_token: undefined,\n    access_token: undefined,\n    state: undefined,\n    token_type: undefined,\n    expires_in: undefined,\n    error_description: undefined,\n    error: undefined\n  });\n  if (error) {\n    throw createOAuthError(error_description ?? error);\n  }\n  if (!access_token) {\n    // error is being caught in attemptCompleteOAuthFlow.ts\n    throw createOAuthError('No access token returned from OAuth flow.');\n  }\n  const validatedState = await validateState(state);\n  const username = (access_token && decodeJWT(access_token).payload.username) ?? 'username';\n  await cacheCognitoTokens({\n    username,\n    AccessToken: access_token,\n    IdToken: id_token,\n    TokenType: token_type,\n    ExpiresIn: expires_in\n  });\n  return completeFlow({\n    redirectUri,\n    state: validatedState,\n    preferPrivateSession\n  });\n};\nconst completeFlow = async ({\n  redirectUri,\n  state,\n  preferPrivateSession\n}) => {\n  await oAuthStore.clearOAuthData();\n  await oAuthStore.storeOAuthSignIn(true, preferPrivateSession);\n  // this should be called before any call that involves `fetchAuthSession`\n  // e.g. `getCurrentUser()` below, so it allows every inflight async calls to\n  //  `fetchAuthSession` can be resolved\n  resolveAndClearInflightPromises();\n  // when the oauth flow is completed, there should be nothing to block the async calls\n  // that involves fetchAuthSession in the `TokenOrchestrator`\n  cognitoUserPoolsTokenProvider.setWaitForInflightOAuth(async () => {\n    // no-op\n  });\n  if (isCustomState(state)) {\n    Hub.dispatch('auth', {\n      event: 'customOAuthState',\n      data: urlSafeDecode(getCustomState(state))\n    }, 'Auth', AMPLIFY_SYMBOL);\n  }\n  Hub.dispatch('auth', {\n    event: 'signInWithRedirect'\n  }, 'Auth', AMPLIFY_SYMBOL);\n  await dispatchSignedInHubEvent();\n  clearHistory(redirectUri);\n};\nconst isCustomState = state => {\n  return /-/.test(state);\n};\nconst getCustomState = state => {\n  return state.split('-').splice(1).join('-');\n};\nconst clearHistory = redirectUri => {\n  if (typeof window !== 'undefined' && typeof window.history !== 'undefined') {\n    window.history.replaceState(window.history.state, '', redirectUri);\n  }\n};\nexport { completeOAuthFlow };","map":{"version":3,"names":["completeOAuthFlow","currentUrl","userAgentValue","clientId","redirectUri","responseType","domain","preferPrivateSession","urlParams","AmplifyUrl","error","searchParams","get","errorMessage","createOAuthError","handleCodeFlow","handleImplicitFlow","url","code","state","validatedState","validateState","oAuthTokenEndpoint","codeVerifier","oAuthStore","loadPKCE","oAuthTokenBody","grant_type","client_id","redirect_uri","code_verifier","body","Object","entries","map","k","v","encodeURIComponent","join","access_token","refresh_token","refreshToken","id_token","error_message","token_type","expires_in","fetch","method","headers","USER_AGENT_HEADER","json","username","decodeJWT","payload","cacheCognitoTokens","AccessToken","IdToken","RefreshToken","TokenType","ExpiresIn","completeFlow","error_description","hash","substring","split","pairings","reduce","accum","undefined","clearOAuthData","storeOAuthSignIn","resolveAndClearInflightPromises","cognitoUserPoolsTokenProvider","setWaitForInflightOAuth","isCustomState","Hub","dispatch","event","data","urlSafeDecode","getCustomState","AMPLIFY_SYMBOL","dispatchSignedInHubEvent","clearHistory","test","splice","window","history","replaceState"],"sources":["E:\\CSC-PROJECT\\amplify-react-app\\node_modules\\@aws-amplify\\auth\\src\\providers\\cognito\\utils\\oauth\\completeOAuthFlow.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AMPLIFY_SYMBOL, AmplifyUrl, USER_AGENT_HEADER, urlSafeDecode, } from '@aws-amplify/core/internals/utils';\nimport { Hub, decodeJWT } from '@aws-amplify/core';\nimport { cacheCognitoTokens } from '../../tokenProvider/cacheTokens';\nimport { cognitoUserPoolsTokenProvider } from '../../tokenProvider';\nimport { dispatchSignedInHubEvent } from '../dispatchSignedInHubEvent';\nimport { createOAuthError } from './createOAuthError';\nimport { resolveAndClearInflightPromises } from './inflightPromise';\nimport { validateState } from './validateState';\nimport { oAuthStore } from './oAuthStore';\nexport const completeOAuthFlow = async ({ currentUrl, userAgentValue, clientId, redirectUri, responseType, domain, preferPrivateSession, }) => {\n    const urlParams = new AmplifyUrl(currentUrl);\n    const error = urlParams.searchParams.get('error');\n    const errorMessage = urlParams.searchParams.get('error_description');\n    if (error) {\n        throw createOAuthError(errorMessage ?? error);\n    }\n    if (responseType === 'code') {\n        return handleCodeFlow({\n            currentUrl,\n            userAgentValue,\n            clientId,\n            redirectUri,\n            domain,\n            preferPrivateSession,\n        });\n    }\n    return handleImplicitFlow({\n        currentUrl,\n        redirectUri,\n        preferPrivateSession,\n    });\n};\nconst handleCodeFlow = async ({ currentUrl, userAgentValue, clientId, redirectUri, domain, preferPrivateSession, }) => {\n    /* Convert URL into an object with parameters as keys\n{ redirect_uri: 'http://localhost:3000/', response_type: 'code', ...} */\n    const url = new AmplifyUrl(currentUrl);\n    const code = url.searchParams.get('code');\n    const state = url.searchParams.get('state');\n    // if `code` or `state` is not presented in the redirect url, most likely\n    // that the end user cancelled the inflight oauth flow by:\n    // 1. clicking the back button of browser\n    // 2. closing the provider hosted UI page and coming back to the app\n    if (!code || !state) {\n        throw createOAuthError('User cancelled OAuth flow.');\n    }\n    // may throw error is being caught in attemptCompleteOAuthFlow.ts\n    const validatedState = await validateState(state);\n    const oAuthTokenEndpoint = 'https://' + domain + '/oauth2/token';\n    // TODO(v6): check hub events\n    // dispatchAuthEvent(\n    // \t'codeFlow',\n    // \t{},\n    // \t`Retrieving tokens from ${oAuthTokenEndpoint}`\n    // );\n    const codeVerifier = await oAuthStore.loadPKCE();\n    const oAuthTokenBody = {\n        grant_type: 'authorization_code',\n        code,\n        client_id: clientId,\n        redirect_uri: redirectUri,\n        ...(codeVerifier ? { code_verifier: codeVerifier } : {}),\n    };\n    const body = Object.entries(oAuthTokenBody)\n        .map(([k, v]) => `${encodeURIComponent(k)}=${encodeURIComponent(v)}`)\n        .join('&');\n    const { access_token, refresh_token: refreshToken, id_token, error, error_message: errorMessage, token_type, expires_in, } = await (await fetch(oAuthTokenEndpoint, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n            [USER_AGENT_HEADER]: userAgentValue,\n        },\n        body,\n    })).json();\n    if (error) {\n        // error is being caught in attemptCompleteOAuthFlow.ts\n        throw createOAuthError(errorMessage ?? error);\n    }\n    const username = (access_token && decodeJWT(access_token).payload.username) ?? 'username';\n    await cacheCognitoTokens({\n        username,\n        AccessToken: access_token,\n        IdToken: id_token,\n        RefreshToken: refreshToken,\n        TokenType: token_type,\n        ExpiresIn: expires_in,\n    });\n    return completeFlow({\n        redirectUri,\n        state: validatedState,\n        preferPrivateSession,\n    });\n};\nconst handleImplicitFlow = async ({ currentUrl, redirectUri, preferPrivateSession, }) => {\n    // hash is `null` if `#` doesn't exist on URL\n    const url = new AmplifyUrl(currentUrl);\n    const { id_token, access_token, state, token_type, expires_in, error_description, error, } = (url.hash ?? '#')\n        .substring(1) // Remove # from returned code\n        .split('&')\n        .map(pairings => pairings.split('='))\n        .reduce((accum, [k, v]) => ({ ...accum, [k]: v }), {\n        id_token: undefined,\n        access_token: undefined,\n        state: undefined,\n        token_type: undefined,\n        expires_in: undefined,\n        error_description: undefined,\n        error: undefined,\n    });\n    if (error) {\n        throw createOAuthError(error_description ?? error);\n    }\n    if (!access_token) {\n        // error is being caught in attemptCompleteOAuthFlow.ts\n        throw createOAuthError('No access token returned from OAuth flow.');\n    }\n    const validatedState = await validateState(state);\n    const username = (access_token && decodeJWT(access_token).payload.username) ?? 'username';\n    await cacheCognitoTokens({\n        username,\n        AccessToken: access_token,\n        IdToken: id_token,\n        TokenType: token_type,\n        ExpiresIn: expires_in,\n    });\n    return completeFlow({\n        redirectUri,\n        state: validatedState,\n        preferPrivateSession,\n    });\n};\nconst completeFlow = async ({ redirectUri, state, preferPrivateSession, }) => {\n    await oAuthStore.clearOAuthData();\n    await oAuthStore.storeOAuthSignIn(true, preferPrivateSession);\n    // this should be called before any call that involves `fetchAuthSession`\n    // e.g. `getCurrentUser()` below, so it allows every inflight async calls to\n    //  `fetchAuthSession` can be resolved\n    resolveAndClearInflightPromises();\n    // when the oauth flow is completed, there should be nothing to block the async calls\n    // that involves fetchAuthSession in the `TokenOrchestrator`\n    cognitoUserPoolsTokenProvider.setWaitForInflightOAuth(async () => {\n        // no-op\n    });\n    if (isCustomState(state)) {\n        Hub.dispatch('auth', {\n            event: 'customOAuthState',\n            data: urlSafeDecode(getCustomState(state)),\n        }, 'Auth', AMPLIFY_SYMBOL);\n    }\n    Hub.dispatch('auth', { event: 'signInWithRedirect' }, 'Auth', AMPLIFY_SYMBOL);\n    await dispatchSignedInHubEvent();\n    clearHistory(redirectUri);\n};\nconst isCustomState = (state) => {\n    return /-/.test(state);\n};\nconst getCustomState = (state) => {\n    return state.split('-').splice(1).join('-');\n};\nconst clearHistory = (redirectUri) => {\n    if (typeof window !== 'undefined' && typeof window.history !== 'undefined') {\n        window.history.replaceState(window.history.state, '', redirectUri);\n    }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}