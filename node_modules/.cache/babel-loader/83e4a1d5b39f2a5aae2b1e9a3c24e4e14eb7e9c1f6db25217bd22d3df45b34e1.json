{"ast":null,"code":"import { useRef, useCallback } from 'react';\nimport useIsomorphicLayoutEffect from 'use-isomorphic-layout-effect';\nimport useConstant from './useConstant';\nimport { useSyncExternalStoreWithSelector } from 'use-sync-external-store/shim/with-selector';\nimport { getServiceSnapshot, isInterpreterStateEqual, isService } from './utils';\nfunction identity(a) {\n  return a;\n}\nexport function isActorWithState(actorRef) {\n  return 'state' in actorRef;\n}\nfunction isDeferredActor(actorRef) {\n  return 'deferred' in actorRef;\n}\nfunction defaultGetSnapshot(actorRef) {\n  return 'getSnapshot' in actorRef ? isService(actorRef) ? getServiceSnapshot(actorRef) : actorRef.getSnapshot() : isActorWithState(actorRef) ? actorRef.state : undefined;\n}\nexport function useActor(actorRef, getSnapshot) {\n  if (getSnapshot === void 0) {\n    getSnapshot = defaultGetSnapshot;\n  }\n  var actorRefRef = useRef(actorRef);\n  var deferredEventsRef = useRef([]);\n  var subscribe = useCallback(function (handleStoreChange) {\n    var unsubscribe = actorRef.subscribe(handleStoreChange).unsubscribe;\n    return unsubscribe;\n  }, [actorRef]);\n  var boundGetSnapshot = useCallback(function () {\n    return getSnapshot(actorRef);\n  }, [actorRef, getSnapshot]);\n  var isEqual = useCallback(function (prevState, nextState) {\n    if (isService(actorRef)) {\n      return isInterpreterStateEqual(actorRef, prevState, nextState);\n    }\n    return prevState === nextState;\n  }, [actorRef]);\n  var storeSnapshot = useSyncExternalStoreWithSelector(subscribe, boundGetSnapshot, boundGetSnapshot, identity, isEqual);\n  var send = useConstant(function () {\n    return function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      var event = args[0];\n      if (process.env.NODE_ENV !== 'production' && args.length > 1) {\n        console.warn(\"Unexpected payload: \".concat(JSON.stringify(args[1]), \". Only a single event object can be sent to actor send() functions.\"));\n      }\n      var currentActorRef = actorRefRef.current;\n      // If the previous actor is a deferred actor,\n      // queue the events so that they can be replayed\n      // on the non-deferred actor.\n      if (isDeferredActor(currentActorRef) && currentActorRef.deferred) {\n        deferredEventsRef.current.push(event);\n      } else {\n        currentActorRef.send(event);\n      }\n    };\n  });\n  useIsomorphicLayoutEffect(function () {\n    actorRefRef.current = actorRef;\n    // Dequeue deferred events from the previous deferred actorRef\n    while (deferredEventsRef.current.length > 0) {\n      var deferredEvent = deferredEventsRef.current.shift();\n      actorRef.send(deferredEvent);\n    }\n  }, [actorRef]);\n  return [storeSnapshot, send];\n}","map":{"version":3,"names":["useRef","useCallback","useIsomorphicLayoutEffect","useConstant","useSyncExternalStoreWithSelector","getServiceSnapshot","isInterpreterStateEqual","isService","identity","a","isActorWithState","actorRef","isDeferredActor","defaultGetSnapshot","getSnapshot","state","undefined","useActor","actorRefRef","deferredEventsRef","subscribe","handleStoreChange","unsubscribe","boundGetSnapshot","isEqual","prevState","nextState","storeSnapshot","send","args","_i","arguments","length","event","process","env","NODE_ENV","console","warn","concat","JSON","stringify","currentActorRef","current","deferred","push","deferredEvent","shift"],"sources":["E:/CSC-PROJECT/amplify-react-app/node_modules/@xstate/react/es/useActor.js"],"sourcesContent":["import { useRef, useCallback } from 'react';\nimport useIsomorphicLayoutEffect from 'use-isomorphic-layout-effect';\nimport useConstant from './useConstant';\nimport { useSyncExternalStoreWithSelector } from 'use-sync-external-store/shim/with-selector';\nimport { getServiceSnapshot, isInterpreterStateEqual, isService } from './utils';\nfunction identity(a) {\n    return a;\n}\nexport function isActorWithState(actorRef) {\n    return 'state' in actorRef;\n}\nfunction isDeferredActor(actorRef) {\n    return 'deferred' in actorRef;\n}\nfunction defaultGetSnapshot(actorRef) {\n    return 'getSnapshot' in actorRef\n        ? isService(actorRef)\n            ? getServiceSnapshot(actorRef)\n            : actorRef.getSnapshot()\n        : isActorWithState(actorRef)\n            ? actorRef.state\n            : undefined;\n}\nexport function useActor(actorRef, getSnapshot) {\n    if (getSnapshot === void 0) { getSnapshot = defaultGetSnapshot; }\n    var actorRefRef = useRef(actorRef);\n    var deferredEventsRef = useRef([]);\n    var subscribe = useCallback(function (handleStoreChange) {\n        var unsubscribe = actorRef.subscribe(handleStoreChange).unsubscribe;\n        return unsubscribe;\n    }, [actorRef]);\n    var boundGetSnapshot = useCallback(function () { return getSnapshot(actorRef); }, [actorRef, getSnapshot]);\n    var isEqual = useCallback(function (prevState, nextState) {\n        if (isService(actorRef)) {\n            return isInterpreterStateEqual(actorRef, prevState, nextState);\n        }\n        return prevState === nextState;\n    }, [actorRef]);\n    var storeSnapshot = useSyncExternalStoreWithSelector(subscribe, boundGetSnapshot, boundGetSnapshot, identity, isEqual);\n    var send = useConstant(function () { return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var event = args[0];\n        if (process.env.NODE_ENV !== 'production' && args.length > 1) {\n            console.warn(\"Unexpected payload: \".concat(JSON.stringify(args[1]), \". Only a single event object can be sent to actor send() functions.\"));\n        }\n        var currentActorRef = actorRefRef.current;\n        // If the previous actor is a deferred actor,\n        // queue the events so that they can be replayed\n        // on the non-deferred actor.\n        if (isDeferredActor(currentActorRef) && currentActorRef.deferred) {\n            deferredEventsRef.current.push(event);\n        }\n        else {\n            currentActorRef.send(event);\n        }\n    }; });\n    useIsomorphicLayoutEffect(function () {\n        actorRefRef.current = actorRef;\n        // Dequeue deferred events from the previous deferred actorRef\n        while (deferredEventsRef.current.length > 0) {\n            var deferredEvent = deferredEventsRef.current.shift();\n            actorRef.send(deferredEvent);\n        }\n    }, [actorRef]);\n    return [storeSnapshot, send];\n}\n"],"mappings":"AAAA,SAASA,MAAM,EAAEC,WAAW,QAAQ,OAAO;AAC3C,OAAOC,yBAAyB,MAAM,8BAA8B;AACpE,OAAOC,WAAW,MAAM,eAAe;AACvC,SAASC,gCAAgC,QAAQ,4CAA4C;AAC7F,SAASC,kBAAkB,EAAEC,uBAAuB,EAAEC,SAAS,QAAQ,SAAS;AAChF,SAASC,QAAQA,CAACC,CAAC,EAAE;EACjB,OAAOA,CAAC;AACZ;AACA,OAAO,SAASC,gBAAgBA,CAACC,QAAQ,EAAE;EACvC,OAAO,OAAO,IAAIA,QAAQ;AAC9B;AACA,SAASC,eAAeA,CAACD,QAAQ,EAAE;EAC/B,OAAO,UAAU,IAAIA,QAAQ;AACjC;AACA,SAASE,kBAAkBA,CAACF,QAAQ,EAAE;EAClC,OAAO,aAAa,IAAIA,QAAQ,GAC1BJ,SAAS,CAACI,QAAQ,CAAC,GACfN,kBAAkB,CAACM,QAAQ,CAAC,GAC5BA,QAAQ,CAACG,WAAW,CAAC,CAAC,GAC1BJ,gBAAgB,CAACC,QAAQ,CAAC,GACtBA,QAAQ,CAACI,KAAK,GACdC,SAAS;AACvB;AACA,OAAO,SAASC,QAAQA,CAACN,QAAQ,EAAEG,WAAW,EAAE;EAC5C,IAAIA,WAAW,KAAK,KAAK,CAAC,EAAE;IAAEA,WAAW,GAAGD,kBAAkB;EAAE;EAChE,IAAIK,WAAW,GAAGlB,MAAM,CAACW,QAAQ,CAAC;EAClC,IAAIQ,iBAAiB,GAAGnB,MAAM,CAAC,EAAE,CAAC;EAClC,IAAIoB,SAAS,GAAGnB,WAAW,CAAC,UAAUoB,iBAAiB,EAAE;IACrD,IAAIC,WAAW,GAAGX,QAAQ,CAACS,SAAS,CAACC,iBAAiB,CAAC,CAACC,WAAW;IACnE,OAAOA,WAAW;EACtB,CAAC,EAAE,CAACX,QAAQ,CAAC,CAAC;EACd,IAAIY,gBAAgB,GAAGtB,WAAW,CAAC,YAAY;IAAE,OAAOa,WAAW,CAACH,QAAQ,CAAC;EAAE,CAAC,EAAE,CAACA,QAAQ,EAAEG,WAAW,CAAC,CAAC;EAC1G,IAAIU,OAAO,GAAGvB,WAAW,CAAC,UAAUwB,SAAS,EAAEC,SAAS,EAAE;IACtD,IAAInB,SAAS,CAACI,QAAQ,CAAC,EAAE;MACrB,OAAOL,uBAAuB,CAACK,QAAQ,EAAEc,SAAS,EAAEC,SAAS,CAAC;IAClE;IACA,OAAOD,SAAS,KAAKC,SAAS;EAClC,CAAC,EAAE,CAACf,QAAQ,CAAC,CAAC;EACd,IAAIgB,aAAa,GAAGvB,gCAAgC,CAACgB,SAAS,EAAEG,gBAAgB,EAAEA,gBAAgB,EAAEf,QAAQ,EAAEgB,OAAO,CAAC;EACtH,IAAII,IAAI,GAAGzB,WAAW,CAAC,YAAY;IAAE,OAAO,YAAY;MACpD,IAAI0B,IAAI,GAAG,EAAE;MACb,KAAK,IAAIC,EAAE,GAAG,CAAC,EAAEA,EAAE,GAAGC,SAAS,CAACC,MAAM,EAAEF,EAAE,EAAE,EAAE;QAC1CD,IAAI,CAACC,EAAE,CAAC,GAAGC,SAAS,CAACD,EAAE,CAAC;MAC5B;MACA,IAAIG,KAAK,GAAGJ,IAAI,CAAC,CAAC,CAAC;MACnB,IAAIK,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,IAAIP,IAAI,CAACG,MAAM,GAAG,CAAC,EAAE;QAC1DK,OAAO,CAACC,IAAI,CAAC,sBAAsB,CAACC,MAAM,CAACC,IAAI,CAACC,SAAS,CAACZ,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,qEAAqE,CAAC,CAAC;MAC/I;MACA,IAAIa,eAAe,GAAGxB,WAAW,CAACyB,OAAO;MACzC;MACA;MACA;MACA,IAAI/B,eAAe,CAAC8B,eAAe,CAAC,IAAIA,eAAe,CAACE,QAAQ,EAAE;QAC9DzB,iBAAiB,CAACwB,OAAO,CAACE,IAAI,CAACZ,KAAK,CAAC;MACzC,CAAC,MACI;QACDS,eAAe,CAACd,IAAI,CAACK,KAAK,CAAC;MAC/B;IACJ,CAAC;EAAE,CAAC,CAAC;EACL/B,yBAAyB,CAAC,YAAY;IAClCgB,WAAW,CAACyB,OAAO,GAAGhC,QAAQ;IAC9B;IACA,OAAOQ,iBAAiB,CAACwB,OAAO,CAACX,MAAM,GAAG,CAAC,EAAE;MACzC,IAAIc,aAAa,GAAG3B,iBAAiB,CAACwB,OAAO,CAACI,KAAK,CAAC,CAAC;MACrDpC,QAAQ,CAACiB,IAAI,CAACkB,aAAa,CAAC;IAChC;EACJ,CAAC,EAAE,CAACnC,QAAQ,CAAC,CAAC;EACd,OAAO,CAACgB,aAAa,EAAEC,IAAI,CAAC;AAChC"},"metadata":{},"sourceType":"module","externalDependencies":[]}