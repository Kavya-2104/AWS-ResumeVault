{"ast":null,"code":"import { StorageAction } from '@aws-amplify/core/internals/utils';\nimport '@smithy/md5-js';\nimport '@aws-amplify/core/internals/aws-client-utils';\nimport '../../utils/client/runtime/s3TransferHandler/fetch.mjs';\nimport 'fast-xml-parser';\nimport '../../utils/client/runtime/s3TransferHandler/xhr.mjs';\nimport 'buffer';\nimport { resolveS3ConfigAndInput } from '../../utils/resolveS3ConfigAndInput.mjs';\nimport '../../../../errors/types/validation.mjs';\nimport { logger } from '../../../../utils/logger.mjs';\nimport '../../utils/client/base.mjs';\nimport '../../utils/client/getObject.mjs';\nimport '../../utils/client/listObjectsV2.mjs';\nimport '../../utils/client/putObject.mjs';\nimport '../../utils/client/createMultipartUpload.mjs';\nimport '../../utils/client/uploadPart.mjs';\nimport '../../utils/client/completeMultipartUpload.mjs';\nimport '../../utils/client/listParts.mjs';\nimport '../../utils/client/abortMultipartUpload.mjs';\nimport '../../utils/client/copyObject.mjs';\nimport { headObject } from '../../utils/client/headObject.mjs';\nimport '../../utils/client/deleteObject.mjs';\nimport { getStorageUserAgentValue } from '../../utils/userAgent.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst getProperties = async (amplify, input, action) => {\n  const {\n    key,\n    options\n  } = input;\n  const {\n    s3Config,\n    bucket,\n    keyPrefix\n  } = await resolveS3ConfigAndInput(amplify, options);\n  const finalKey = `${keyPrefix}${key}`;\n  logger.debug(`get properties of ${key} from ${finalKey}`);\n  const response = await headObject({\n    ...s3Config,\n    userAgentValue: getStorageUserAgentValue(action ?? StorageAction.GetProperties)\n  }, {\n    Bucket: bucket,\n    Key: finalKey\n  });\n  return {\n    key,\n    contentType: response.ContentType,\n    size: response.ContentLength,\n    eTag: response.ETag,\n    lastModified: response.LastModified,\n    metadata: response.Metadata,\n    versionId: response.VersionId\n  };\n};\nexport { getProperties };","map":{"version":3,"names":["getProperties","amplify","input","action","key","options","s3Config","bucket","keyPrefix","resolveS3ConfigAndInput","finalKey","logger","debug","response","headObject","userAgentValue","getStorageUserAgentValue","StorageAction","GetProperties","Bucket","Key","contentType","ContentType","size","ContentLength","eTag","ETag","lastModified","LastModified","metadata","Metadata","versionId","VersionId"],"sources":["E:\\CSC-PROJECT\\amplify-react-app\\node_modules\\@aws-amplify\\storage\\src\\providers\\s3\\apis\\internal\\getProperties.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { StorageAction } from '@aws-amplify/core/internals/utils';\nimport { resolveS3ConfigAndInput } from '../../utils';\nimport { headObject } from '../../utils/client';\nimport { getStorageUserAgentValue } from '../../utils/userAgent';\nimport { logger } from '../../../../utils';\nexport const getProperties = async (amplify, input, action) => {\n    const { key, options } = input;\n    const { s3Config, bucket, keyPrefix } = await resolveS3ConfigAndInput(amplify, options);\n    const finalKey = `${keyPrefix}${key}`;\n    logger.debug(`get properties of ${key} from ${finalKey}`);\n    const response = await headObject({\n        ...s3Config,\n        userAgentValue: getStorageUserAgentValue(action ?? StorageAction.GetProperties),\n    }, {\n        Bucket: bucket,\n        Key: finalKey,\n    });\n    return {\n        key,\n        contentType: response.ContentType,\n        size: response.ContentLength,\n        eTag: response.ETag,\n        lastModified: response.LastModified,\n        metadata: response.Metadata,\n        versionId: response.VersionId,\n    };\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAMY,MAACA,aAAa,GAAG,MAAAA,CAAOC,OAAO,EAAEC,KAAK,EAAEC,MAAM,KAAK;EAC3D,MAAM;IAAEC,GAAG;IAAEC;EAAO,CAAE,GAAGH,KAAK;EAC9B,MAAM;IAAEI,QAAQ;IAAEC,MAAM;IAAEC;EAAS,CAAE,GAAG,MAAMC,uBAAuB,CAACR,OAAO,EAAEI,OAAO,CAAC;EACvF,MAAMK,QAAQ,GAAI,GAAEF,SAAU,GAAEJ,GAAI,EAAC;EACrCO,MAAM,CAACC,KAAK,CAAE,qBAAoBR,GAAI,SAAQM,QAAS,EAAC,CAAC;EACzD,MAAMG,QAAQ,GAAG,MAAMC,UAAU,CAAC;IAC9B,GAAGR,QAAQ;IACXS,cAAc,EAAEC,wBAAwB,CAACb,MAAM,IAAIc,aAAa,CAACC,aAAa;EACtF,CAAK,EAAE;IACCC,MAAM,EAAEZ,MAAM;IACda,GAAG,EAAEV;EACb,CAAK,CAAC;EACF,OAAO;IACHN,GAAG;IACHiB,WAAW,EAAER,QAAQ,CAACS,WAAW;IACjCC,IAAI,EAAEV,QAAQ,CAACW,aAAa;IAC5BC,IAAI,EAAEZ,QAAQ,CAACa,IAAI;IACnBC,YAAY,EAAEd,QAAQ,CAACe,YAAY;IACnCC,QAAQ,EAAEhB,QAAQ,CAACiB,QAAQ;IAC3BC,SAAS,EAAElB,QAAQ,CAACmB;EAC5B,CAAK;AACL"},"metadata":{},"sourceType":"module","externalDependencies":[]}